{
    "filterQueryArgumentName": "q",
    "scalar_udf_field": "udf_scalar_values",
    "sqlForMapFeatures": {
        "fields": {
            "base": "feature_type",
            "utfGrid": "feature_type, treemap_mapfeature.id AS id"
        },
        "tables": {
            "base": "treemap_mapfeature",
            "mapfeature": "treemap_mapfeature LEFT JOIN treemap_tree ON treemap_mapfeature.id = treemap_tree.plot_id LEFT JOIN treemap_species ON treemap_tree.species_id = treemap_species.id"
        },
        "where": {
            "instance" : "treemap_mapfeature.instance_id = <%= instanceid %>"
        }
    },
    "boundaryGrainstoreSql": "(SELECT the_geom_webmercator FROM treemap_boundary JOIN treemap_instance_boundaries ON treemap_instance_boundaries.boundary_id = treemap_boundary.id WHERE treemap_instance_boundaries.instance_id=<%= instanceid %>) otmfiltersql",
    "getBoundarySql" : "SELECT the_geom_webmercator FROM treemap_boundary WHERE id=<%= boundaryId %>",
    "customDbFieldNames": {
        "geom": "the_geom_webmercator"
    },
    "interactivityForUtfGridRequests": "id",
    "modelMapping": {
        "mapfeature": "treemap_mapfeature",
        "tree": "treemap_tree",
        "species": "treemap_species"
    }
}
