{
    "filterQueryArgumentName": "q",
    "scalar_udf_field": "udf_scalar_values",
    "sqlForMapFeatures": {
        "fields": {
            "base": "the_geom_webmercator",
            "utfGrid": "the_geom_webmercator, species_id, treemap_mapfeature.id AS the_plot_id"
            },
        "tables": {
            "base": "treemap_mapfeature",
            "plot": "treemap_mapfeature LEFT JOIN treemap_tree ON treemap_mapfeature.id = treemap_tree.plot_id LEFT JOIN treemap_species ON treemap_tree.species_id = treemap_species.id",
            "tree": "treemap_mapfeature      JOIN treemap_tree ON treemap_mapfeature.id = treemap_tree.plot_id LEFT JOIN treemap_species ON treemap_tree.species_id = treemap_species.id"
            },
        "where": {
            "instance" : "treemap_mapfeature.instance_id = <%= instanceid %>"
        }
    },
    "boundaryGrainstoreSql": "(SELECT the_geom_webmercator FROM treemap_boundary JOIN treemap_instance_boundaries ON treemap_instance_boundaries.boundary_id = treemap_boundary.id WHERE treemap_instance_boundaries.instance_id=<%= instanceid %>) otmfiltersql",
    "getBoundarySql" : "SELECT the_geom_webmercator FROM treemap_boundary WHERE id=<%= boundaryId %>",
    "customDbFieldNames": {
        "geom": "the_geom_webmercator"
    },
    "interactivityForUtfGridRequests": "species_id,the_plot_id",
    "modelMapping": {
        "plot": "treemap_mapfeature",
        "tree": "treemap_tree",
        "species": "treemap_species"
    }
}
